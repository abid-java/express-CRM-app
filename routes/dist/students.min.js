"use strict";var express=require("express"),router=express.Router(),StudentModel=require("../models/student.model");router.get("/",function(e,t,d){t.send("students route activated")}),router.post("/create",function(e,d,t){console.log("Request Body : ",e);var o=new StudentModel({firstName:e.body.firstName,lastName:e.body.lastName,age:e.body.age,dob:e.body.dob,department:e.body.department}),n={status:200,description:"Student Created Successfully"};o.save(function(e,t){e?d.send(e):(console.log("<======= Overriding existing student_id with one freshly saved =======>"),n.id=t._id,d.send(n))})}),router.get("/list",function(e,d,t){var o=[],n={};StudentModel.find(function(e,t){e?d.send(e):(console.log("<======= Students - Start =======>"),console.log(JSON.stringify(t)),console.log("<======= Students - End =======>"),t.forEach(function(e){n=new StudentModel({firstName:e.firstName,lastName:e.lastName,age:e.age,dob:e.dob,department:e.department}),o.push(n)}),d.send({status:200,data:o,resultsFound:o.length}))})}),router.get("/searchByName",function(e,d,t){var o=[],n={},s=e.query.firstName;StudentModel.find({firstName:s},function(e,t){e?d.send(e):(console.log("<======= Students - Start =======>"),console.log(JSON.stringify(t)),console.log("<======= Students - End =======>"),t.forEach(function(e){n=new StudentModel({firstName:e.firstName,lastName:e.lastName,age:e.age,dob:e.dob,department:e.department}),o.push(n)}),d.send({status:200,data:o,resultsFound:o.length}))})}),router.put("/update",function(e,d,t){console.log("Request Body : ",e.body);var o={status:200,description:"Student Updated Successfully"},n=new StudentModel;e&&e.body&&(e.body.firstName&&(n.firstName=e.body.firstName),e.body.lastName&&(n.lastName=e.body.lastName),e.body.age&&(n.age=e.body.age),e.body.dob&&(n.dob=e.body.dob),e.body.department&&(n.department=e.body.department)),StudentModel.findOneAndUpdate({age:28},n,function(e,t){e?d.send(e):(o.id=t._id,d.send(o))})}),module.exports=router;
//# sourceMappingURL=students.min.js.map
