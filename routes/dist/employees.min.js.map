{"version":3,"sources":["employees.js"],"names":["express","require","Router","mysqlconnection","router","get","request","response","next","query","error","result","resultArray","GET_ALL_EMPLOYEES","Object","values","JSON","parse","stringify","emp","employee","firstName","FIRST_NAME","lastname","LAST_NAME","employeeId","EMPLOYEE_ID","dateofjoining","HIRE_DATE","employees","push","PHONE_NUMBER","data","send","length","params","empid","GET_EMPLOYEE","forEach","email","EMAIL","status","resultsFound","module","exports"],"mappings":"aAAA,IAAAA,QAAAC,QAAA,WAEID,OAAOA,QAAUE,SAEjBC,gBAAkBF,QAAQ,gBAE9BG,OAAOC,IAAI,IAAK,SAACC,EAASC,EAAUC,GAFhCL,IAAAA,EAAe,GAGfA,gBAAAM,MADaH,iCACb,SAAAI,EAAAC,GACIC,GACAC,QAAAA,IAAiB,iEACrBV,EAAgBM,KAAMI,KAEFC,OAAAC,OAAAC,KAAAC,MAAAD,KAAAE,UAAAP,KACED,QAAd,SAAAS,GACG,IAAAC,EAAA,GACHR,EAAcE,WAAkBK,EAACF,YACjCL,EAAAS,UAAoBF,EAAOG,WACnBF,EAAJG,SAAAJ,EAAAK,UACQJ,EAACK,QAAiBC,EAAAA,aAClBN,EAACC,MAAgBC,EAAAA,MACjBF,EAARO,cAAAR,EAAAS,UACQC,EAARC,KAAuBC,KAEvBX,EAASO,KAAAA,CACTE,OAAeT,IARnBY,KAAAH,EAUSI,aAAKJ,EAAAK,cAMrB9B,OAtBDC,IAAA,iBAAA,SAAAC,EAAAC,EAAAC,GAJJ,IAAAqB,EAAA,GA8BQA,EAAJ,sDAAAvB,EAAA6B,OAAAC,MACAjC,gBAAkBM,MAAlB4B,EAAA,SAAA3B,EAAAC,GACI0B,GACJlC,QAAgBM,IAAM4B,iEACf3B,EAAOuB,KAAAvB,KAENI,OAAAC,OAAAC,KAAAC,MAAAD,KAAAE,UAAAP,KACG2B,QAAA,SAAAnB,GACHP,IAAcE,EAAOC,GACrBH,EAAAa,WAAoBN,EAAOO,YACnBN,EAAJC,UAAAF,EAAAG,WACQF,EAACK,SAAiBC,EAAAA,UAClBN,EAACC,QAAgBC,EAAAA,aACjBF,EAARmB,MAAwBf,EAAAA,MAChBJ,EAARO,cAAuBI,EAAvBH,UACQC,EAASV,KAAIqB,KAErBX,EAAUC,KAAKV,CARnBqB,OAAA,IAUSR,KAAKJ,EACFa,aADEb,EAAAK,cAOzBS,OA3BDC,QAAAxC","file":"employees.min.js","sourcesContent":["/*jshint esversion: 6 */\r\n\r\nvar express = require('express');\r\nvar router = express.Router();\r\nvar mysqlconnection = require('../db_config');\r\n\r\nrouter.get('/', (request, response, next) => {\r\n    var employees = [];\r\n    var resultArray = [];\r\n    var GET_ALL_EMPLOYEES = \"select * from sakila.employees\";\r\n    mysqlconnection.query(GET_ALL_EMPLOYEES, (error, result) => {\r\n        if(error) {\r\n            console.log(\"<============ Error while fetching data from DB ============>\");\r\n            response.send(error);\r\n        } else {\r\n            resultArray = Object.values(JSON.parse(JSON.stringify(result)))\r\n            resultArray.forEach(emp => {\r\n                var employee = {};\r\n                employee.employeeId = emp.EMPLOYEE_ID;\r\n                employee.firstName = emp.FIRST_NAME;\r\n                employee.lastname = emp.LAST_NAME;\r\n                employee.contact = emp.PHONE_NUMBER;\r\n                employee.email = emp.EMAIL;\r\n                employee.dateofjoining = emp.HIRE_DATE;\r\n                employees.push(employee);\r\n            });\r\n            response.send({\r\n                status: 200,\r\n                data: employees,\r\n                resultsFound: employees.length\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\nrouter.get('/search/:empid', (request, response, next) => {\r\n    var employees = [];\r\n    var resultArray = [];\r\n    var GET_EMPLOYEE = \"select * from sakila.employees where employee_id = \"+request.params.empid;\r\n    mysqlconnection.query(GET_EMPLOYEE, (error, result) => {\r\n        if(error) {\r\n            console.log(\"<============ Error while fetching data from DB ============>\");\r\n            response.send(error);\r\n        } else {\r\n            resultArray = Object.values(JSON.parse(JSON.stringify(result)))\r\n            resultArray.forEach(emp => {\r\n                var employee = {};\r\n                employee.employeeId = emp.EMPLOYEE_ID;\r\n                employee.firstName = emp.FIRST_NAME;\r\n                employee.lastname = emp.LAST_NAME;\r\n                employee.contact = emp.PHONE_NUMBER;\r\n                employee.email = emp.EMAIL;\r\n                employee.dateofjoining = emp.HIRE_DATE;\r\n                employees.push(employee);\r\n            });\r\n            response.send({\r\n                status: 200,\r\n                data: employees,\r\n                resultsFound: employees.length\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\nmodule.exports = router;"]}